<main class="main" fxFlex="100%" fxLayout="column" >
  <app-header></app-header>
  <section fxLayout="column" style="padding: 16px">
      <h3>{{title}}</h3>
      <section *ngIf="!formOcurrence" fxFlex="100%" fxLayoutAlign="center center" style="margin: 160px 0px">
          <mat-spinner></mat-spinner>
      </section>

      <section fxFlex.xs="100%" class="cardSection" *ngIf="formOcurrence">
          <form [formGroup]="formOcurrence" >
              <mat-card>
                  <mat-card-header>
                      <div mat-card-avatar style="  margin-block-end: 10px; margin-top: -10px;"><mat-icon>spa</mat-icon></div>
                      <mat-card-title>Informações</mat-card-title>
                  </mat-card-header>

                  <mat-card-content>

                      <section fxLayout="row" fxLayout.xs="row wrap" fxLayoutGap.sm="4px" fxLayoutGap.md="4px" fxLayoutGap.lg="4px">
                          <mat-form-field style="margin: 0px 5px; margin-top: -10px;" appearance="outline" fxFlex="100%" fxFlex.sm="30%" fxFlex.md="30%" fxFlex.lg="30%">
                              <mat-label>Data da Ocorrência</mat-label>
                              <input matInput [matDatepicker]="picker"
                                     [formControl]="ocurred_at_data">
                              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                              <mat-datepicker #picker></mat-datepicker>
                          </mat-form-field>

                            <div style="margin: 0px" fxFlex="100%" fxFlex.sm="30%" fxFlex.md="30%" fxFlex.lg="30%">
                                <div style="margin-top: -16px; height: 54px; margin-block-end: 16px;">
                                    <ngx-timepicker-field [format]="24" [defaultTime]="'22:10'" [formControl]="ocurred_at_time"></ngx-timepicker-field>
                                </div>
                            </div>



                          <mat-form-field appearance="outline" fxFlex="100%" fxFlex.sm="40%" fxFlex.md="40%" fxFlex.lg="40%">
                              <mat-label>Tipo de Ocorrência</mat-label>
                              <mat-select disableRipple [formControl]="formType">
                                  <mat-option  *ngFor="let type of types" [value]="type" >{{type}}</mat-option>
                              </mat-select>
                          </mat-form-field>
                      </section>


                      <section fxLayout="row" fxLayout.xs="row wrap" fxLayoutGap.sm="4px" fxLayoutGap.md="4px" fxLayoutGap.lg="4px">

                          <mat-form-field appearance="outline" fxFlex="100%" fxFlex.sm="33.33%" fxFlex.md="33.33%" fxFlex.lg="33.33%">
                              <mat-label>Cep</mat-label>
                              <input
                                      matInput
                                      type="text"
                                      minlength="1"
                                      maxlength="12"
                                      required="true"
                                      placeholder="GR"
                                      formControlName="zip_code">
                          </mat-form-field>

                          <mat-form-field appearance="outline" fxFlex="100%" fxFlex.sm="33.33%" fxFlex.md="33.33%" fxFlex.lg="33.33%">
                              <mat-label>Cidade</mat-label>
                              <input
                                      matInput
                                      type="text"
                                      minlength="1"
                                      maxlength="60"
                                      required="true"
                                      placeholder="Cidade"
                                      formControlName="city">
                          </mat-form-field>

                          <mat-form-field appearance="outline" fxFlex="100%" fxFlex.sm="33.33%" fxFlex.md="33.33%" fxFlex.lg="33.33%">
                              <mat-label>Bairro</mat-label>
                              <input
                                      matInput
                                      type="text"
                                      minlength="1"
                                      maxlength="70"
                                      required="true"
                                      placeholder="Bairro"
                                      formControlName="neighborhood">
                          </mat-form-field>
                      </section>
                      <section fxLayout="row" fxLayout.xs="row wrap" fxLayoutGap.sm="4px" fxLayoutGap.md="4px" fxLayoutGap.lg="4px">

                          <mat-form-field appearance="outline" fxFlex="100%" fxFlex.sm="76%" fxFlex.md="76%" fxFlex.lg="76%">
                              <mat-label>Rua</mat-label>
                              <input
                                      matInput
                                      type="email"
                                      minlength="1"
                                      maxlength="60"
                                      required="true"
                                      placeholder="Rua"
                                      formControlName="street">
                          </mat-form-field>

                          <mat-form-field appearance="outline" fxFlex="100%" fxFlex.sm="33.33%" fxFlex.md="33.33%" fxFlex.lg="33.33%">
                              <mat-label>numero</mat-label>
                              <input
                                      matInput
                                      type="number"
                                      minlength="1"
                                      maxlength="10"
                                      required="true"
                                      placeholder="number"
                                      formControlName="number">
                          </mat-form-field>
                      </section>

                      <section fxLayout="row" fxLayout.xs="row wrap" fxLayoutGap.sm="4px" fxLayoutGap.md="4px" fxLayoutGap.lg="4px">

                          <mat-form-field appearance="outline" fxFlex="100%" fxFlex.sm="100%" fxFlex.md="100%" fxFlex.lg="100%">
                              <mat-label>Complemento</mat-label>
                              <input
                                      matInput
                                      type="email"
                                      minlength="1"
                                      maxlength="60"
                                      placeholder="Complemento"
                                      formControlName="complement">
                          </mat-form-field>
                      </section>

                      <section fxLayout="row" fxLayout.xs="row wrap" fxLayoutGap.sm="4px" fxLayoutGap.md="4px" fxLayoutGap.lg="4px">

                          <mat-form-field appearance="outline" fxFlex="100%" fxFlex.sm="100%" fxFlex.md="100%" fxFlex.lg="100%">
                              <mat-label>Descrição da Ocorrência</mat-label>
                              <textarea
                                      matInput
                                      type="text"
                                      minlength="1"
                                      maxlength="250"
                                      required="true"
                                      placeholder="Descrição"
                                      formControlName="description"></textarea>
                          </mat-form-field>
                      </section>


                  </mat-card-content>


                  <mat-card-content>
                      <section fxLayout="row" fxLayoutAlign="end" fxLayoutGap="4px">
                          <button
                                  type="submit"
                                  mat-raised-button
                                  color="primary"
                                  [disabled]="(!formOcurrence.valid || !formType.valid || !ocurred_at_data.valid || !ocurred_at_time.valid)"
                                  (click)="submitFormUser()">
                              <mat-icon>done_all</mat-icon>
                              Salvar
                          </button>
                      </section>
                  </mat-card-content>
              </mat-card>
          </form>
      </section>
  </section>


  <app-footer></app-footer>
</main>




